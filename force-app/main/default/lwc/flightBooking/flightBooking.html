<template>
    <div class="spinner">
        <template if:true={isLoading}>
             <lightning-spinner alternative-text="Loading" variant="brand" size="large">
             </lightning-spinner>
        </template>
    </div>
    <!-- Account Search -->
    <lightning-layout multiple-rows="true">
        <lightning-layout-item size="6" class="slds-p-around_small">
            <lightning-card title="Account Search">
                <div class="slds-p-horizontal_medium">
                    <!-- Conditionally render the child component only when selectedAccount is populated -->
            <template if:true={selectedAccount}>
                <c-test-custom-lookups selected-account={selectedAccount} onaccountselect={handleAccountRecord}></c-test-custom-lookups>
            </template>
            <template if:false={selectedAccount}>
                <c-test-custom-lookups onaccountselect={handleAccountRecord}></c-test-custom-lookups>
            </template>
                </div>
            </lightning-card>
        </lightning-layout-item>
    </lightning-layout>

    <!-- Flight Details Form -->
    <lightning-card title="Flight Details Form">
        <!--
        <div slot="actions" class="slds-button-group">
            <lightning-button label="New Lead" variant="brand" onclick={handleNewLead}></lightning-button>
        </div>
        -->

        <lightning-tabset variant="scoped">
            <!-- Arrival -->
            <lightning-tab label="Arrival" value="Arrival" onactive={handleTabChange}>
                <template if:true={isTabOne}>
                    <!-- Commented BY Saurabh -->
                    <!-- <lightning-layout multiple-rows="true">
                        <lightning-layout-item size="12" class="slds-p-around_small">
                            <c-test-custom-lookups></c-test-custom-lookups>
                        </lightning-layout-item>
                    </lightning-layout> -->

                    <!-- Flight Details Section -->
                    <lightning-layout multiple-rows="true">
                        <lightning-layout-item size="6" class="slds-p-around_small">
                            <label class="custom-label slds-form-element__label">Arriving Airport</label>
                            <lightning-combobox required name="Service_Airport__c" data-id="arrivingAirportr" variant="label-hidden" onblur={handleFieldChange}
                                options={baseAirportOptions} value={arrivingAirport} onchange={handleArrivingAirportChange}>
                            </lightning-combobox>
                        </lightning-layout-item>
                        <lightning-layout-item size="6" class="slds-p-around_small">
                            <label class="custom-label slds-form-element__label">Departure Airport</label>
                            <lightning-combobox required name="Departure_Airport__c" data-id="departureAirport" variant="label-hidden" onblur={handleFieldChange}
                                options={allAirportOptions} value={departureAirport}
                                onchange={handleDepartureAirportChange}></lightning-combobox>
                        </lightning-layout-item>
                        <lightning-layout-item size="6" class="slds-p-around_small">
                            <label class="custom-label slds-form-element__label">Select Sector</label>
                            <lightning-combobox name="Sector__c" data-id="selectSector" variant="label-hidden" disabled options={sectorOption}
                                onblur={handleFieldChange} value={sector} ></lightning-combobox>
                        </lightning-layout-item>
                        <lightning-layout-item size="6" class="slds-p-around_small">
                            <label class="custom-label slds-form-element__label">Date of Arrival</label>
                            <lightning-input required type="date" name="Date_of_Arrival__c" variant="label-hidden" value={arrivalDate}
                            onblur={handleFieldChange} onchange={handleArrivalDateChange}></lightning-input>
                        </lightning-layout-item>
                    </lightning-layout>
                    <lightning-layout multiple-rows="true">
                        <lightning-layout-item size="4" class="slds-p-around_small">
                            <label class="custom-label slds-form-element__label">Flight Number</label>
                            <lightning-combobox required style="font-size: 14px;" data-id="flightNumber" variant="label-hidden" options={flightNumberOptions}
                            onblur={handleFieldChange} name="Flight_Number_Arrival__c" value={flightNumber} onchange={handleFlightNumberChange}></lightning-combobox>
                        </lightning-layout-item>
                        <lightning-layout-item size="4" class="slds-p-around_small">
                            <label class="custom-label slds-form-element__label">STA Time</label>
                            <lightning-input required style="font-size: 14px;" name="STA_Time__c" type="time" variant="label-hidden" value={staTime}
                            onblur={handleFieldChange} onchange={handleStaTimeChange}></lightning-input>
                        </lightning-layout-item>
                        <lightning-layout-item size="4" class="slds-p-around_small">
                            <label class="custom-label slds-form-element__label">Service Date-Time</label>
                            <lightning-input style="font-size: 14px;" type="time" disabled variant="label-hidden" value={staTime}
                                onchange={handleServiceTimeChange}></lightning-input>
                        </lightning-layout-item>
                    </lightning-layout>
                    <lightning-layout multiple-rows="true">
                        <lightning-layout-item size="4" class="slds-p-around_small">
                            <div class="counter">
                                <span>Adult</span>
                                <button data-id="decrementAdult"   onclick={decrementAdult} class="btn minus">-</button>
                                <span class="count">{adultCount}</span>
                                <button data-id="incrementAdult" onclick={incrementAdult} class="btn plus">+</button>
                                <span class="age-range">12 years & above</span>
                            </div>
                        </lightning-layout-item>
                        <lightning-layout-item size="4" class="slds-p-around_small">
                            <div class="counter">
                                <span>Child</span>
                                <button onclick={decrementChild} class="btn minus">-</button>
                                <span class="count">{childCount}</span>
                                <button onclick={incrementChild} class="btn plus">+</button>
                                <span class="age-range">2-11 years</span>
                            </div>
                        </lightning-layout-item>
                        <lightning-layout-item size="4" class="slds-p-around_small">
                            <div class="counter">
                                <span>Infant</span>
                                <button onclick={decrementInfant} class="btn minus">-</button>
                                <span class="count">{infantCount}</span>
                                <button onclick={incrementInfant} class="btn plus">+</button>
                                <span class="age-range">Below 2 years</span>
                            </div>
                        </lightning-layout-item>
                    </lightning-layout>
                    <div class="slds-align_absolute-center slds-m-top_medium">
                        <lightning-button class="encalmbg" label="Next" variant="brand" onclick={handleSave}></lightning-button>
                    </div>
                </template>
            </lightning-tab>
            <!-- Departure -->
            <lightning-tab label="Departure" value="Departure" onactive={handleTabChange}>

                <template if:true={isTabTwo}>
                    <lightning-layout multiple-rows="true">
                        <lightning-layout-item size="6" class="slds-p-around_small">
                            <label class="custom-label slds-form-element__label">Departure Airport</label>
                            <lightning-combobox  required name="Service_Airport__c" variant="label-hidden" options={baseAirportOptions}
                            onblur={handleFieldChange} value={arrivingAirport} onchange={handleArrivingAirportChange}></lightning-combobox>
                        </lightning-layout-item>
                        <lightning-layout-item size="6" class="slds-p-around_small">
                            <label class="custom-label slds-form-element__label">Destination Airport</label>
                            <lightning-combobox  required name="Arriving_Airport__c" variant="label-hidden" options={allAirportOptions}
                            onblur={handleFieldChange} value={departureAirport} onchange={handleDepartureAirportChange}></lightning-combobox>
                        </lightning-layout-item>
                    </lightning-layout>
                    <lightning-layout>
                        <lightning-layout-item size="6" class="slds-p-around_small">
                            <label class="custom-label slds-form-element__label">Select Sector</label>
                            <lightning-combobox name="Sector__c" data-id="selectSector" variant="label-hidden" disabled options={sectorOption}
                            onblur={handleFieldChange} value={sector}></lightning-combobox>
                        </lightning-layout-item>
                        <lightning-layout-item size="6" class="slds-p-around_small">
                            <label class="custom-label slds-form-element__label">Date of Departure</label>
                            <lightning-input  required type="date" name="Date_of_Departure__c" variant="label-hidden" value={departureDate}
                            onblur={handleFieldChange} onchange={handleDepartureDateChange}></lightning-input>
                        </lightning-layout-item>
                    </lightning-layout>
                    <lightning-layout multiple-rows="true">
                        <lightning-layout-item size="4" class="slds-p-around_small">
                            <label class="custom-label slds-form-element__label">Flight Number</label>
                            <lightning-combobox  required name="Flight_Number_Departure__c" data-id="flightNumber" variant="label-hidden" options={flightNumberOptions}
                                onblur={handleFieldChange} value={flightNumber} onchange={handleFlightNumberChange}></lightning-combobox>
                        </lightning-layout-item>
                        <lightning-layout-item size="4" class="slds-p-around_small">
                            <label class="custom-label slds-form-element__label">STD Time</label>
                            <lightning-input  required name="STD_Time__c" type="time" variant="label-hidden" value={stdTime}
                            onblur={handleFieldChange}  onchange={handleStdTimeChange}></lightning-input>
                        </lightning-layout-item>
                        <lightning-layout-item size="4" class="slds-p-around_small">
                            <label class="custom-label slds-form-element__label">Service Date-Time</label>
                            <lightning-input type="time" variant="label-hidden" disabled value={stdTime}
                                onchange={handleServiceTimeChange}></lightning-input>
                        </lightning-layout-item>
                    </lightning-layout>
                    <lightning-layout multiple-rows="true">
                        <lightning-layout-item size="4" class="slds-p-around_small">
                            <div class="counter">
                                <span>Adult</span>
                                <button data-id="decrementAdult"   onclick={decrementAdult} class="btn minus">-</button>
                                <span class="count">{adultCount}</span>
                                <button data-id="incrementAdult" onclick={incrementAdult} class="btn plus">+</button>
                                <span class="age-range">12 years & above</span>
                            </div>
                        </lightning-layout-item>
                        <lightning-layout-item size="4" class="slds-p-around_small">
                            <div class="counter">
                                <span>Child</span>
                                <button onclick={decrementChild} class="btn minus">-</button>
                                <span class="count">{childCount}</span>
                                <button onclick={incrementChild} class="btn plus">+</button>
                                <span class="age-range">2-11 years</span>
                            </div>
                        </lightning-layout-item>
                        <lightning-layout-item size="4" class="slds-p-around_small">
                            <div class="counter">
                                <span>Infant</span>
                                <button onclick={decrementInfant} class="btn minus">-</button>
                                <span class="count">{infantCount}</span>
                                <button onclick={incrementInfant} class="btn plus">+</button>
                                <span class="age-range">Below 2 years</span>
                            </div>
                        </lightning-layout-item>
                    </lightning-layout>
                    <div class="slds-align_absolute-center slds-m-top_medium">
                        <lightning-button label="Next" class="encalmbg" variant="brand" onclick={handleSave}></lightning-button>
                    </div>
                </template>
            </lightning-tab>
            <!-- Transit -->
            <lightning-tab label="Transit" value="Transit" onactive={handleTabChange} class="slds-grid slds-gutters">
                <template if:true={isTabThree}>

                    <lightning-layout multiple-rows="true">
                        <lightning-layout-item size="6" class="slds-p-around_small">
                            <label class="custom-label slds-form-element__label">Select Transit Via</label>
                            <lightning-combobox  required name="Service_Airport__c" variant="label-hidden" options={baseAirportOptions} value={transitAirport}
                            onblur={handleFieldChange} onchange={handleTransitAirportChange}></lightning-combobox>
                        </lightning-layout-item>
                        <lightning-layout-item size="6" class="slds-p-around_small">
                            <label class="custom-label slds-form-element__label">Arriving From</label>
                            <lightning-combobox  required name="Departure_Airport__c" variant="label-hidden" options={allAirportOptionsArrFrom} value={departureAirport}
                            onblur={handleFieldChange} onchange={handleDepartureAirportChange}></lightning-combobox>
                        </lightning-layout-item>
                    </lightning-layout>
                    <lightning-layout>
                        <lightning-layout-item size="6" class="slds-p-around_small">
                            <label class="custom-label slds-form-element__label">Departing To</label>
                            <lightning-combobox  required name="Arriving_Airport__c" variant="label-hidden" options={allAirportOptionsDepTo} value={arrivingAirport}
                            onblur={handleFieldChange} onchange={handleArrivingAirportChange}></lightning-combobox>
                        </lightning-layout-item>
                        <lightning-layout-item size="6" class="slds-p-around_small">
                            <label class="custom-label slds-form-element__label">Select Sector</label>
                            <lightning-combobox name="Sector__c" data-id="selectSector" disabled variant="label-hidden" options={sectorOption}
                                onblur={handleFieldChange} value={sector}></lightning-combobox>
                        </lightning-layout-item>
                    </lightning-layout>
                    <lightning-layout multiple-rows="true" class="slds-p-around_small">                        
                    <lightning-layout-item size="4" class="slds-p-around_small">
                        <label class="custom-label slds-form-element__label">Date of Arrival</label>
                        <lightning-input  required name="Date_of_Arrival__c" type="date" variant="label-hidden" value={arrivalDate}
                            onblur={handleFieldChange} onchange={handleTransitArrivalDateChange}></lightning-input>
                    </lightning-layout-item>
                        <lightning-layout-item size="4" class="slds-p-around_small">
                            <label class="custom-label slds-form-element__label">Flight Number</label>
                            <lightning-combobox  required name="Flight_Number_Arrival__c" data-id="flightNumber" variant="label-hidden" options={flightNumberOptionsArrival}
                            onblur={handleFieldChange} value={flightNumberArrival} onchange={handleFlightNumberChangeArrival}></lightning-combobox>
                        </lightning-layout-item>
                        <lightning-layout-item size="4" class="slds-p-around_small">
                            <label class="custom-label slds-form-element__label">STA Time</label>
                            <lightning-input  required type="time" name="STA_Time__c" variant="label-hidden" value={staTime}
                            onblur={handleFieldChange} onchange={handleStaTimeChange}></lightning-input>
                        </lightning-layout-item>
                        <lightning-layout-item size="4" class="slds-p-around_small">
                            <label class="custom-label slds-form-element__label">Date of Departure</label>
                            <lightning-input  required name="Date_of_Departure__c" type="date" variant="label-hidden" value={departureDate}
                            onblur={handleFieldChange} onchange={handleTransitDepartureDateChange}></lightning-input>
                        </lightning-layout-item>
                        <lightning-layout-item size="4" class="slds-p-around_small">
                            <label class="custom-label slds-form-element__label">Flight Number</label>
                            <lightning-combobox  required name="Flight_Number_Departure__c" data-id="flightNumber" variant="label-hidden" options={flightNumberOptionsDeparture}
                            onblur={handleFieldChange} value={flightNumberDeparture} onchange={handleFlightNumberChangeDeparture}></lightning-combobox>
                        </lightning-layout-item>
                        <lightning-layout-item size="4" class="slds-p-around_small">
                            <label class="custom-label slds-form-element__label">STD Time</label>
                            <lightning-input  required type="time" name="STD_Time__c" variant="label-hidden" value={stdTime}
                            onblur={handleFieldChange} onchange={handleStdTimeChange}></lightning-input>
                        </lightning-layout-item>
                    </lightning-layout>
                    <lightning-layout multiple-rows="true">
                        <lightning-layout-item size="4" class="slds-p-around_small">
                            <div class="counter">
                                <span>Adult</span>
                                <button data-id="decrementAdult"   onclick={decrementAdult} class="btn minus">-</button>
                                <span class="count">{adultCount}</span>
                                <button data-id="incrementAdult" onclick={incrementAdult} class="btn plus">+</button>
                                <span class="age-range">12 years & above</span>
                            </div>
                        </lightning-layout-item>
                        <lightning-layout-item size="4" class="slds-p-around_small">
                            <div class="counter">
                                <span>Child</span>
                                <button onclick={decrementChild} class="btn minus">-</button>
                                <span class="count">{childCount}</span>
                                <button onclick={incrementChild} class="btn plus">+</button>
                                <span class="age-range">2-11 years</span>
                            </div>
                        </lightning-layout-item>
                        <lightning-layout-item size="4" class="slds-p-around_small">
                            <div class="counter">
                                <span>Infant</span>
                                <button onclick={decrementInfant} class="btn minus">-</button>
                                <span class="count">{infantCount}</span>
                                <button onclick={incrementInfant} class="btn plus">+</button>
                                <span class="age-range">Below 2 years</span>
                            </div>
                        </lightning-layout-item>
                    </lightning-layout>
                    <div class="slds-align_absolute-center slds-m-top_medium">
                        <lightning-button label="Next" class="encalmbg" variant="brand" onclick={handleSave}></lightning-button>
                    </div>

                </template>
            </lightning-tab>
        </lightning-tabset>
    </lightning-card>
</template>